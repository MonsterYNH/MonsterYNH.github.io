(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){e.exports=a.p+"static/media/wechat.16f3d03f.jpg"},168:function(e,t,a){e.exports=a.p+"static/media/qq.8340ff3f.jpg"},175:function(e,t,a){e.exports=a.p+"static/media/monsterlogo.6e99af67.png"},182:function(e,t,a){e.exports=a(344)},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){},344:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(8),r=a.n(i),c=(a(187),a(34)),s=a(180),o=a(179),m=a(35),u=a(23),d=a(16),p=a(116),h=a(13),g=a(14),f=a(18),E=a(17),y=a(19),v=a(87),b=(a(188),a(351)),k=a(346),C=a(350),_=a(347),w=a(349),j=a(44),S=a(56),O=a(5),T=a(57),x=a(165),I=(a(189),a(46)),A=a(51),L=a.n(A);L.a.defaults.headers.common["content-type"]="application/json",L.a.defaults.timeout=6e4,L.a.interceptors.request.use(function(e){return e.headers.authorization=localStorage.getItem("user_token"),e},function(e){return Promise.reject(e)}),L.a.interceptors.response.use(function(e){return e.status>=200&&e.status<300?(e.data&&0===e.data.code?e.data&&e.data.token&&localStorage.setItem("user_token",e.data.token):e.data&&e.data.code>0&&I.a.error(e.data&&e.data.message?e.data.message:"Unknow err"),e.data):e},function(e){return Promise.reject(e)});var M=function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,null,[{key:"GET",value:function(e,t){return new Promise(function(a,n){L.a.get(e,{params:t}).then(function(e){a(e)}).catch(function(e){n(e)})})}},{key:"POST",value:function(e,t){return new Promise(function(a,n){L.a.post(e,t).then(function(e){a(e)}).catch(function(e){n(e)})})}},{key:"PUT",value:function(e,t){return new Promise(function(a,n){L.a.put(e,t).then(function(e){a(e)}).catch(function(e){n(e)})})}},{key:"DELETE",value:function(e,t){return new Promise(function(a,n){L.a.delete(e,{params:t}).then(function(e){a(e)}).catch(function(e){n(e)})})}}]),e}(),D=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).getBannerData=function(){M.GET("/api/common/banner/list").then(function(e){0===e.code&&a.setState({bannerData:e.data})})},a.state={bannerData:[]},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getBannerData()}},{key:"render",value:function(){var e=this.state.bannerData.map(function(e,t){return l.a.createElement("div",{style:{display:"flex",justifyContent:"center"},key:e.object_id},l.a.createElement("img",{alt:"test",width:"100%",height:"auto",src:e.link,key:e.object_id}))});return l.a.createElement(x.a,{autoplay:!0},e)}}]),t}(n.Component),q=a(32),R=a(177),P=a(15),Y=a(50),z=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).getUserInfo=function(){M.GET("/api/user/info/".concat(a.state.user_id)).then(function(e){0===e.code&&a.setState({userInfo:e.data,user_avatar:e.data.avatar})})},a.onOptionBarClick=function(e){switch(e){case"follow":var t;switch(a.state.userInfo.follow_status){case"follow":t="unfollow";break;case"unfollow":t="follow";break;case"each":t="unfollow";break;default:t="follow"}M.PUT("/api/user/follow/".concat(a.state.userInfo.id),{option:t}).then(function(e){0===e.code&&a.getUserInfo()});break;case"logout":localStorage.removeItem("user_token"),window.location.reload();break;default:I.a.error("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd\uff0c\u656c\u8bf7\u671f\u5f85")}},a.state={type:a.props.type,user_id:a.props.id,user_avatar:a.props.avatar,placement:a.props.placement,userInfo:{}},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e,t=null;switch(this.state.userInfo.follow_status){case"follow":e="\u5df2\u5173\u6ce8";break;case"unfollow":e="\u5173\u6ce8";break;case"each":e="\u4e92\u76f8\u5173\u6ce8";break;default:e="\u5173\u6ce8"}switch(this.state.type){case"self":t=l.a.createElement("div",null,l.a.createElement(k.a,{to:{pathname:"/center/article/".concat(this.state.user_id),query:{name:"\u7528\u6237\u4e2d\u5fc3"}}},l.a.createElement(P.a,null,"\u4e3b\u9875")),l.a.createElement(P.a,{onClick:this.onOptionBarClick.bind(this,"logout")},"\u6ce8\u9500"));break;default:t=l.a.createElement("div",null,l.a.createElement(k.a,{to:{pathname:"/center/article/".concat(this.state.user_id),query:{name:"\u7528\u6237\u4e2d\u5fc3"}}},l.a.createElement(P.a,null,"\u4e3b\u9875")),l.a.createElement(P.a,{onClick:this.onOptionBarClick.bind(this,"follow")},e))}return l.a.createElement(S.a,{autoAdjustOverflow:!0,placement:this.state.placement?this.state.placement:"bottom",content:l.a.createElement(d.a,{bordered:!1},l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",paddingBottom:"1rem"}},l.a.createElement(j.a,{size:"large",icon:"user",src:this.state.userInfo.avatar}),l.a.createElement("div",{style:{paddingLeft:"1rem"}},this.state.userInfo.name,1===this.state.userInfo.sex?l.a.createElement(O.a,{type:"man"}):l.a.createElement(O.a,{type:"woman"}))),l.a.createElement("div",null,l.a.createElement("p",null,this.state.userInfo.signture||"\u8fd9\u4e2a\u4eba\u5f88\u61d2..."))),l.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingBottom:"1rem"}},"\u5173\u6ce8: ",this.state.userInfo.followed_user_num||0,"  \u7c89\u4e1d: ",this.state.userInfo.user_followed_num||0),t),trigger:"hover"},l.a.createElement(k.a,{to:"/center/article/".concat(this.state.user_id)},l.a.createElement(j.a,{onMouseEnter:this.getUserInfo,icon:"user",src:this.state.user_avatar,size:"small"})))}}]),t}(n.Component),G=a(31),U=a.n(G);U.a.locale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY\u5e74MM\u6708DD\u65e5",LLL:"YYYY\u5e74MM\u6708DD\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74MM\u6708DD\u65e5ddddAh\u70b9mm\u5206",l:"YYYY-M-D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u51cc\u6668"===t||"\u65e9\u4e0a"===t||"\u4e0a\u5348"===t?e:"\u4e0b\u5348"===t||"\u665a\u4e0a"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,a){var n=100*e+t;return n<600?"\u51cc\u6668":n<900?"\u65e9\u4e0a":n<1130?"\u4e0a\u5348":n<1230?"\u4e2d\u5348":n<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u5468";default:return e}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",ss:"%d\u79d2",m:"1\u5206\u949f",mm:"%d\u5206\u949f",h:"1\u5c0f\u65f6",hh:"%d\u5c0f\u65f6",d:"1\u5929",dd:"%d\u5929",M:"1\u4e2a\u6708",MM:"%d\u4e2a\u6708",y:"1\u5e74",yy:"%d\u5e74"},week:{dow:1,doy:4}});var H=U.a,N=d.a.Meta;H.locale("zh-cn");var B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).getData=function(e){M.GET("/api/article/type",{start:a.state.start,limit:a.state.limit,type:a.state.type,sort:a.state.sort,tags:a.state.tags,user_id:a.state.user_id}).then(function(t){0===t.code&&e(t.data)})},a.onLoadMore=function(){var e=a.state.data.concat(Object(Y.a)(new Array(3)).map(function(){return{loading:!0,name:{}}}));a.setState({loading:!0,list:e}),a.getData(function(e){var t=a.state.data.concat(e.data),n=a.state.start;a.setState({data:t,list:t,loading:!1,start:n+1,total:t.total},function(){window.dispatchEvent(new Event("resize"))})})},a.onAvatarMouseEnter=function(e){M.GET("/api/user/info/".concat(e)).then(function(e){a.setState({userInfo:e.data})})},a.onClickArticleAction=function(e,t,n,l){switch(e){case"like-o":M.POST("/api/community/option/".concat(t),{kind:"article",type:"like",option:n>=0?-1:1}).then(function(e){if(0===e.code){var t=a.state.list;t[l].like_users_num=e.data.num,t[l].like_status=e.data.status,a.setState({list:t})}});break;case"star-o":M.POST("/api/community/option/".concat(t),{kind:"article",type:"collect",option:n>=0?-1:1}).then(function(e){if(0===e.code){var t=a.state.list;t[l].collect_users_num=e.data.num,t[l].collect_status=e.data.status,a.setState({list:t})}})}},a.onClickCommentIcon=function(e){var t=a.state.commentListStatus,n=t.indexOf(e);n>=0?t.splice(n,1):t.push(e),a.setState({commentListStatus:t})},a.setCommentNum=function(e,t){var n=a.state.data;n[t].comment_num=e,a.setState({data:n})},a.state={start:1,limit:10,total:0,type:e.type,sort:e.sort,tags:e.tags,user_id:e.user_id,initLoading:!1,loading:!1,data:[],list:[],userInfo:{},commentListStatus:[]},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.start;this.getData(function(a){e.setState({initLoading:!1,data:a.data,list:a.data,start:t+1,total:a.total})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.initLoading,n=t.list,i=(t.start-1)*t.limit<t.total?l.a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},l.a.createElement(P.a,{onClick:this.onLoadMore},"\u52a0\u8f7d\u66f4\u591a")):l.a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},l.a.createElement("span",null,"\u6211\u662f\u6709\u5e95\u7ebf\u7684"));return l.a.createElement(q.a,{size:"middle",className:"article-list",loading:a,itemLayout:"horizontal",loadMore:i,dataSource:n,split:!1,renderItem:function(t,a){return l.a.createElement(q.a.Item,{key:t.id},l.a.createElement(R.a,{title:!1,loading:t.loading,active:!0},l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(d.a,null,l.a.createElement(N,{title:l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",null,l.a.createElement(k.a,{to:{pathname:"/article/detail/".concat(t.id),query:{name:t.title}}},t.title))),description:l.a.createElement("div",{style:{display:"flex",height:"100px"}},l.a.createElement("div",{style:{width:Array.isArray(t.images)&&t.images.length>0?"70%":"100%",height:"auto"}},l.a.createElement("div",{style:{textIndent:"2rem",height:"80%"}},t.description||"\u6682\u65e0"),l.a.createElement("div",null,l.a.createElement("span",{style:{paddingRight:"1rem"}},l.a.createElement(O.a,{onClick:e.onClickArticleAction.bind(e,"like-o",t.id,t.like_status,a),type:"like-o",style:{marginRight:8,color:t.like_status>=0?"red":""}}),t.like_users_num),l.a.createElement("span",{style:{paddingRight:"1rem"}},l.a.createElement(O.a,{onClick:e.onClickCommentIcon.bind(e,a),type:"message",style:{marginRight:8}}),t.comment_num),l.a.createElement("span",{style:{paddingRight:"1rem"}},l.a.createElement(z,{id:t.create_user,avatar:t.create_user_avatar})),l.a.createElement("span",{style:{paddingRight:"1rem"}},l.a.createElement(O.a,{type:"eye",style:{marginRight:8}}),t.read_num),l.a.createElement("span",null,l.a.createElement(O.a,{type:"clock-circle",style:{marginRight:8}}),H.unix(t.update_time).calendar()))),l.a.createElement("div",{style:{width:Array.isArray(t.images)&&t.images.length>0?"30%":"0px"}},Array.isArray(t.images)&&t.images.length>0?l.a.createElement("img",{width:"100%",height:"auto",alt:"item",src:t.images[0]}):null))})))))}})}}]),t}(n.Component),V=a(45);function F(e){var t=e.title,a=e.data,n=e.linkPath;return l.a.createElement(d.a,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("p",null,t),l.a.createElement(k.a,{to:n},"\u66f4\u591a")),l.a.createElement("div",null,a.map(function(e,a){return l.a.createElement(k.a,{to:{pathname:"/article/detail/".concat(e.id),query:{name:t}},key:a},l.a.createElement("p",null,e.title))})))}function K(e){var t=e.title,a=e.data;return l.a.createElement(d.a,{style:{display:"flex"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("p",null,t)),a.map(function(e,t){return l.a.createElement(k.a,{key:t,to:{pathname:"/article/all",query:{tag:e.tag}}},l.a.createElement(V.a,{key:t},e.tag,"(",e.total,")"))}))}var W=a(108),J=a.n(W),Q=a(168),$=a.n(Q),X=T.a.Paragraph,Z=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={newArticleData:[],recommendArticleData:[],tags:[]},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.GET("/api/article/type",{type:"new",limit:5}).then(function(t){0===t.code&&e.setState({newArticleData:t.data.data})}),M.GET("/api/article/type",{type:"recommend",limit:5}).then(function(t){0===t.code&&e.setState({recommendArticleData:t.data.data})}),M.GET("/api/article/tags").then(function(t){0===t.code&&e.setState({tags:t.data})})}},{key:"render",value:function(){return l.a.createElement(c.a,null,l.a.createElement(u.a,{span:17},l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(D,null)),l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(d.a,null,l.a.createElement("p",null,l.a.createElement(O.a,{type:"fire",twoToneColor:"#eb2f96",theme:"twoTone"}),"  \u535a\u6587"),l.a.createElement(B,{type:"hot"})))),l.a.createElement(u.a,{span:7},l.a.createElement("div",{style:{paddingLeft:"1rem",paddingTop:"1rem"}},l.a.createElement(d.a,{actions:[l.a.createElement(S.a,{content:l.a.createElement("img",{width:"150px",alt:"wechat",src:J.a})},l.a.createElement(O.a,{type:"wechat"})),l.a.createElement(S.a,{content:l.a.createElement("img",{width:"150px",alt:"qq",src:$.a})},l.a.createElement(O.a,{type:"qq"})),l.a.createElement(S.a,{content:l.a.createElement(X,{copyable:!0},"ynhmonster@163.com")},l.a.createElement(O.a,{type:"mail"}))]},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("span",{style:{position:"relative",bottom:"0px"}},l.a.createElement(j.a,{size:"large",icon:"user",src:"http://img.52z.com/upload/news/image/20180212/20180212084623_32086.jpg"})),l.a.createElement("div",{style:{paddingLeft:"1rem"}},l.a.createElement("div",{style:{color:"black"}},"\u602a\u4eba\u602a\u6027&"),l.a.createElement("div",null,"\u804c\u4e1a: \u540e\u7aef\u670d\u52a1\u5de5\u7a0b\u5e08"),l.a.createElement("div",null,"\u73b0\u5c45: \u5317\u4eac")))),l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(F,{data:this.state.newArticleData,title:"\u6700\u65b0\u6587\u7ae0",linkPath:"/article/new"})),l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(F,{data:this.state.recommendArticleData,title:"\u63a8\u8350\u6587\u7ae0",linkPath:"/article/recommed"})),l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(K,{data:this.state.tags,title:"\u6807\u7b7e"})))))}}]),t}(n.Component),ee=V.a.CheckableTag,te=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).onClickSort=function(){var e=1===a.state.sort?-1:1;a.setState({sort:e})},a.state={sort:-1,hotArticleData:[],newArticleData:[],recommendArticleData:[],tags:[],selectedTags:[],articleKey:0},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location&&this.props.location.query&&this.props.location.query.tag?this.props.location.query.tag:null;if(t){var a=this.state.selectedTags;a.push(t),this.setState({selectedTags:a})}M.GET("/api/article/type",{type:"hot",limit:5}).then(function(t){0===t.code&&e.setState({hotArticleData:t.data.data})}),M.GET("/api/article/type",{type:"new",limit:5}).then(function(t){0===t.code&&e.setState({newArticleData:t.data.data})}),M.GET("/api/article/type",{type:"recommend",limit:5}).then(function(t){0===t.code&&e.setState({recommendArticleData:t.data.data})}),M.GET("/api/article/tags").then(function(t){0===t.code&&e.setState({tags:t.data})})}},{key:"selectTag",value:function(e,t){var a=this.state,n=a.selectedTags,l=a.articleKey,i=t?[].concat(Object(Y.a)(n),[e]):n.filter(function(t){return t!==e});this.setState({selectedTags:i,articleKey:l+1})}},{key:"render",value:function(){var e=this;return l.a.createElement(c.a,null,l.a.createElement(u.a,{span:17},l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(d.a,null,l.a.createElement(m.a,{mode:"horizontal",onSelect:this.onArticleTypeChange,selectedKeys:[this.props.articleType]},l.a.createElement(m.a.Item,{key:"hot"},l.a.createElement(k.a,{to:{pathname:"/article/hot",query:{name:"\u70ed\u95e8\u6587\u7ae0"}}},"\u70ed\u95e8")),l.a.createElement(m.a.Item,{key:"new"},l.a.createElement(k.a,{to:{pathname:"/article/new",query:{name:"\u6700\u65b0\u6587\u7ae0"}}},"\u6700\u65b0")),l.a.createElement(m.a.Item,{key:"recommend"},l.a.createElement(k.a,{to:{pathname:"/article/recommend",query:{name:"\u63a8\u8350\u6587\u7ae0"}}},"\u63a8\u8350")),l.a.createElement(m.a.Item,{key:"all"},l.a.createElement(k.a,{to:{pathname:"/article/all",query:{name:"\u5168\u90e8\u6587\u7ae0"}}},"\u5168\u90e8"))),"all"===this.props.articleType?l.a.createElement(d.a,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("p",{style:{color:"black"}},"\u6807\u7b7e"),l.a.createElement("div",{onClick:this.onClickSort},l.a.createElement("p",null,l.a.createElement(O.a,{type:"filter"}),1===this.state.sort?"\u5012\u5e8f":"\u6b63\u5e8f"))),l.a.createElement("div",null,this.state.tags.map(function(t,a){return l.a.createElement(ee,{key:t.tag,checked:e.state.selectedTags.indexOf(t.tag)>-1,onChange:function(a){return e.selectTag(t.tag,a)}},t.tag)}))):null,l.a.createElement(B,{key:this.state.selectedTags+this.state.sort,type:this.props.articleType,sort:this.state.sort,tags:this.state.selectedTags})))),l.a.createElement(u.a,{span:7},l.a.createElement("div",{style:{paddingLeft:"1rem"}},"hot"!==this.props.articleType?l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(F,{title:"\u70ed\u95e8",data:this.state.hotArticleData,linkPath:"/article/hot"})):null,"new"!==this.props.articleType?l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(F,{title:"\u6700\u65b0",data:this.state.newArticleData,linkPath:"/article/new"})):null,"recommend"!==this.props.articleType?l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(F,{title:"\u63a8\u8350",data:this.state.recommendArticleData,linkPath:"/article/recommend"})):null,l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(K,{title:"\u6807\u7b7e",data:this.state.tags})))))}}]),t}(n.Component),ae=a(74),ne=a(38),le=a(170),ie=a.n(le),re=function(e){function t(e,a){var n;return Object(h.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e,a))).state={editorContent:""},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.refs.editorElem,a=new ie.a(t),n=this.props.setImages;a.customConfig.menus=["bold","fontSize","fontName","justify","quote","link","emoticon","image","code","undo"],a.customConfig.onchange=function(t){e.setState({editorContent:t}),e.props.onContentChange(t)},a.customConfig.uploadImgServer="http://localhost:5001/upload",a.customConfig.uploadImgHooks={success:function(e,t,a){console.log(a.data),0===a.errno&&n(a.data)}},a.customConfig.uploadFileName="file",a.customConfig.debug=!0,a.create()}},{key:"clickHandle",value:function(){alert(this.state.editorContent)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{ref:"editorElem",style:{textAlign:"left",width:"100%"}}),this.props.debug?l.a.createElement("button",{onClick:this.clickHandle.bind(this)},"\u83b7\u53d6\u5185\u5bb9"):null)}}]),t}(n.Component),ce=T.a.Paragraph,se=V.a.CheckableTag,oe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).onClickCreateArticle=function(){a.setState({createArticle:!a.state.createArticle})},a.onClickCreateArticle=function(){a.setState({createArticle:!a.state.createArticle})},a.onTitleChange=function(e){a.setState({title:e})},a.onDescriptionChange=function(e){a.setState({description:e})},a.onCategoryChange=function(e,t){var n=a.state.selectedCategory,l=t?[].concat(Object(Y.a)(n),[e]):n.filter(function(t){return t!==e});a.setState({selectedCategory:l})},a.onTagsChange=function(e,t){var n=a.state.selectedTags,l=t?[].concat(Object(Y.a)(n),[e]):n.filter(function(t){return t!==e});a.setState({selectedTags:l})},a.onContentChange=function(e){a.setState({content:e})},a.saveInputRef=function(e){return a.input=e},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(e){var t=a.state.inputValue,n=a.state,l=n.tags,i=n.categories;t&&-1===l.indexOf(t)&&"tag"===e?l=[].concat(Object(Y.a)(l),[t]):t&&-1===l.indexOf(t)&&"category"===e&&(i=[].concat(Object(Y.a)(i),[t])),"tag"===e?a.setState({tags:l,categories:i,tagInputVisible:!1,inputValue:""}):"category"===e&&a.setState({tags:l,categories:i,categoryInputVisible:!1,inputValue:""})},a.showInput=function(e){"tag"===e?a.setState({tagInputVisible:!0},function(){return a.input.focus()}):a.setState({categoryInputVisible:!0},function(){return a.input.focus()})},a.submitArticle=function(){var e=a.state,t=e.title,n=e.description,l=e.selectedTags,i=e.selectedCategory,r=e.content;t.length<10?I.a.error("\u6587\u7ae0\u6807\u9898\u5fc5\u987b\u5927\u4e8e10\u4e2a\u5b57"):n<100?I.a.error("\u63cf\u8ff0\u5fc5\u987b\u5927\u4e8e30\u4e2a\u5b57"):0!==l.length?1===i.length?r.length<100?I.a.error("\u5185\u5bb9\u5fc5\u987b\u5927\u4e8e100\u4e2a\u5b57"):M.POST("/api/article/create",{title:a.state.title,description:a.state.description,tags:a.state.selectedTags,category:a.state.selectedCategory[0],content:a.state.content,images:a.state.images}).then(function(e){0===e.code&&a.setState({createArticle:!1})}):I.a.error("\u5206\u7c7b\u6570\u5fc5\u987b\u4e3a1"):I.a.error("\u6807\u7b7e\u6570\u5fc5\u987b\u5927\u4e8e1")},a.setImages=function(e){a.setState({images:e})},a.state={userInfo:{},createArticle:!1,title:"",description:"",content:"",categories:[],tags:[],selectedTags:[],selectedCategory:[],tagInputVisible:!1,categoryVisible:!1,inputValue:"",images:[]},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.GET("/api/user/info/".concat(this.props.match.params.id)).then(function(t){0===t.code&&e.setState({userInfo:t.data})}),M.GET("/api/article/tags").then(function(t){if(console.log(t),0===t.code){var a=[];t.data.forEach(function(e){a.push(e.tag)}),e.setState({tags:a})}}),M.GET("/api/article/categories").then(function(t){if(0===t.code){var a=[];t.data.forEach(function(e){a.push(e.category)}),e.setState({categories:a})}})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(c.a,null,l.a.createElement(u.a,{span:17},l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(m.a,{mode:"horizontal",defaultSelectedKeys:[this.state.selectMenu]},l.a.createElement(m.a.Item,{key:"article"},l.a.createElement(k.a,{to:"/center/article/".concat(this.state.userInfo.id)},"\u6587\u7ae0")),l.a.createElement(m.a.Item,{key:"follow"},l.a.createElement(k.a,{to:"/center/follow/".concat(this.state.userInfo.id)},"\u5173\u6ce8"))),l.a.createElement(d.a,null,this.props.children))),l.a.createElement(u.a,{span:7},l.a.createElement("div",{className:"user-setting",style:{paddingTop:"1rem",paddingLeft:"1rem"}},l.a.createElement(d.a,{actions:localStorage.getItem("id")===this.state.userInfo.id?[l.a.createElement("span",{onClick:this.onClickCreateArticle},"\u5199\u6587\u7ae0"),l.a.createElement("span",null,"\u7f16\u8f91")]:null},l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement(j.a,{size:"large",icon:"user",src:this.state.userInfo.avatar})),l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement(ce,{strong:!0},this.state.userInfo.name," ",1===this.state.userInfo.sex?l.a.createElement(O.a,{type:"man"}):l.a.createElement(O.a,{type:"woman"}))),l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},this.state.userInfo.signture||"\u8fd9\u4e2a\u4eba\u5f88\u61d2...")),l.a.createElement(ae.a,{title:l.a.createElement("p",{style:{color:"black"}},"\u5199\u6587\u7ae0"),visible:this.state.createArticle,onOk:this.submitArticle,onCancel:this.onClickCreateArticle,width:"80%"},l.a.createElement("div",null,l.a.createElement(d.a,{className:"title"},l.a.createElement("p",{style:{color:"black"}},"\u6807\u9898"),l.a.createElement(ce,{editable:{onChange:this.onTitleChange}},this.state.title)),l.a.createElement(d.a,{className:"description"},l.a.createElement("p",{style:{color:"black"}},"\u6458\u8981"),l.a.createElement(ce,{editable:{onChange:this.onDescriptionChange}},this.state.description)),l.a.createElement(d.a,{className:"category"},l.a.createElement("p",{style:{color:"black"}},"\u5206\u7c7b"),l.a.createElement("div",null,this.state.categories.map(function(t){return l.a.createElement(se,{key:t,checked:e.state.selectedCategory.indexOf(t)>-1,onChange:function(a){return e.onCategoryChange(t,a)}},t)}),this.state.categoryInputVisible?l.a.createElement(ne.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:this.state.inputValue,onChange:this.handleInputChange,onBlur:this.handleInputConfirm.bind(this,"category"),onPressEnter:this.handleInputConfirm.bind(this,"category")}):l.a.createElement(V.a,{onClick:this.showInput.bind(this,"category"),style:{background:"#fff",borderStyle:"dashed"}},l.a.createElement(O.a,{type:"plus"})," \u65b0\u5206\u7c7b"))),l.a.createElement(d.a,{className:"tag"},l.a.createElement("p",{style:{color:"black"}},"\u6807\u7b7e"),l.a.createElement("div",null,this.state.tags.map(function(t){return l.a.createElement(se,{key:t,checked:e.state.selectedTags.indexOf(t)>-1,onChange:function(a){return e.onTagsChange(t,a)}},t)}),this.state.tagInputVisible?l.a.createElement(ne.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:this.state.inputValue,onChange:this.handleInputChange,onBlur:this.handleInputConfirm.bind(this,"tag"),onPressEnter:this.handleInputConfirm.bind(this,"tag")}):l.a.createElement(V.a,{onClick:this.showInput.bind(this,"tag"),style:{background:"#fff",borderStyle:"dashed"}},l.a.createElement(O.a,{type:"plus"})," \u65b0\u6807\u7b7e"))),l.a.createElement(d.a,{className:"content"},l.a.createElement("p",null,"\u6b63\u6587"),l.a.createElement("div",{style:{width:"100%"},dangerouslySetInnerHTML:{__html:this.state.content}})),l.a.createElement(re,{onContentChange:this.onContentChange,setImages:this.setImages}),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(P.a,{onClick:this.submitArticle},"\u63d0\u4ea4"))))))))}}]),t}(n.Component),me=Object(b.a)(oe),ue=a(76),de=ue.a.TabPane,pe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).getFollowedData=function(e,t){M.GET("/api/user/followed/".concat(a.props.match.params.id),{type:t,start:e,limit:a.state.limit}).then(function(t){0===t.code&&("followed_user"===a.state.kind?a.setState({followedStart:e,followedData:t.data.data,followedTotal:t.data.total}):a.setState({followingStart:e,followingData:t.data.data,followedTotal:t.data.total}))})},a.onFollowTabs=function(e){var t="user_followed"===a.state.kind?a.state.followedStart:a.state.followingStart;a.getFollowedData(t,e),a.setState({kind:e})},a.state={kind:"followed_user",followedStart:1,followingStart:1,limit:10,followedData:[],followedTotal:0,followingData:[],followingTotal:0},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getFollowedData(this.state.followedStart,this.state.kind)}},{key:"render",value:function(){return l.a.createElement(me,null,l.a.createElement(ue.a,{defaultActiveKey:"followed_user",onChange:this.onFollowTabs},l.a.createElement(de,{tab:"\u5173\u6ce8",key:"followed_user"},l.a.createElement(he,{data:this.state.followedData})),l.a.createElement(de,{tab:"\u7c89\u4e1d",key:"user_followed"},l.a.createElement(he,{data:this.state.followingData}))))}}]),t}(n.Component);function he(e){var t=e.data;return l.a.createElement(q.a,{itemLayout:"horizontal",dataSource:t,renderItem:function(e){return l.a.createElement(q.a.Item,null,l.a.createElement(q.a.Item.Meta,{avatar:l.a.createElement(z,{id:e.id,avatar:e.avatar}),title:e.name,description:e.signture&&e.signture.length>0?e.signture:"\u8fd9\u4e2a\u7528\u6237\u5f88\u61d2..."}),l.a.createElement("div",{style:{display:"flex",justifyContent:"end"}},l.a.createElement("p",{style:{paddingRight:"1rem"}},"\u5173\u6ce8: ",e.followed_user_num),l.a.createElement("p",{style:{paddingRight:"1rem"}},"\u7c89\u4e1d: ",e.user_followed_num)))}})}var ge=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={user_id:e.match.params.id},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return l.a.createElement(me,null,l.a.createElement("div",null,l.a.createElement(B,{key:this.state.createArticle,type:"user",user_id:this.state.user_id})))}}]),t}(n.Component);U.a.locale("zh-cn");var fe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).getCommentReplies=function(e,t){M.GET("/api/community/reply/list",{id:t,start:e,limit:a.state.limit}).then(function(e){0===e.code&&a.setState({data:e.data.data,total:e.data.total})})},a.onCommentReplyPageChange=function(e){a.getCommentReplies(e,a.state.comment_id),a.setState({start:e})},a.onArticleCommentReplyClick=function(){M.POST("/api/community/create/commentReply",{comment_user:a.state.comment_user,content:a.state.article_comment_reply_content,object_id:a.state.comment_id}).then(function(e){0===e.code&&a.getCommentReplies(a.state.start,a.state.comment_id)})},a.onArticleCommentReplyChange=function(e){var t=e.target;a.setState({article_comment_reply_content:t.value})},a.state={start:1,limit:10,data:[],total:0,comment_id:e.comment_id,comment_user:e.comment_user,article_comment_reply_content:""},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getCommentReplies(this.state.start,this.state.comment_id)}},{key:"render",value:function(){return l.a.createElement("div",{className:"comment-reply-list"},l.a.createElement(q.a,{bordered:!0,itemLayout:"vertical",size:"large",pagination:{onChange:this.onCommentReplyPageChange,total:this.state.total},dataSource:this.state.data,header:l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",null,"\u5171\u6709",this.state.total,"\u4eba\u8bc4\u8bba"),l.a.createElement("div",null,l.a.createElement(O.a,{type:"swap"}),"\u5207\u6362\u6392\u5e8f")),footer:l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(ne.a,{onChange:this.onArticleCommentReplyChange,style:{width:"100%"},addonAfter:l.a.createElement(O.a,{type:"smile"})}),l.a.createElement(P.a,{onClick:this.onArticleCommentReplyClick},"\u8bc4\u8bba")),renderItem:function(e){return l.a.createElement(q.a.Item,{key:e.id},l.a.createElement("div",{style:{width:"100%"}},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(z,{id:e.to_user,avatar:e.to_user_avatar})),l.a.createElement("div",{style:{paddingLeft:"1rem",paddingRight:"1rem"}},l.a.createElement(O.a,{type:"swap"})),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(z,{id:e.user,avatar:e.user_avatar}))),l.a.createElement("div",{style:{paddingLeft:"3rem",paddingBottom:"1rem",paddingTop:"1rem"}},e.content),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",null),l.a.createElement("div",null,U.a.unix(e.create_time).fromNow()))))}}))}}]),t}(n.Component);U.a.locale("zh-cn");var Ee=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).getComments=function(e,t){M.GET("/api/community/comment/list",{kind:"article_comment",object_id:t,start:e,limit:a.state.limit}).then(function(e){0===e.code&&a.setState({data:e.data.data,total:e.data.total})})},a.onCommentPageChange=function(e){a.getComments(e,a.state.article_id),a.setState({start:e})},a.onArticleCommentClick=function(){M.POST("/api/community/create/comment",{kind:"article_comment",content:a.state.article_comment_content,object_id:a.state.article_id}).then(function(e){0===e.code&&a.getComments(a.state.start,a.state.article_id)})},a.onArticleCommentChange=function(e){var t=e.target;a.setState({article_comment_content:t.value})},a.onClickCommentIcon=function(e){var t=a.state.commentListStatus,n=t.indexOf(e);n>=0?t.splice(n,1):t.push(e),a.setState({commentListStatus:t})},a.onClickCommentAction=function(e,t,n){M.POST("/api/community/option/".concat(e),{kind:"comment",option:t>=0?-1:1}).then(function(e){if(0===e.code){var t=a.state.list;t[n].like_users_num=e.data.num,t[n].like_status=e.data.status,a.setState({list:t})}})},a.state={start:1,limit:10,data:[],total:0,article_id:e.object_id,comment_num:0,replyNum:0,commentListStatus:[]},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getComments(this.state.start,this.state.article_id)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"comment-list"},l.a.createElement(q.a,{bordered:!0,itemLayout:"vertical",size:"large",pagination:{onChange:this.onCommentPageChange,total:this.state.total},dataSource:this.state.data,header:l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",null,"\u5171\u6709",this.state.total,"\u4eba\u8bc4\u8bba"),l.a.createElement("div",null,l.a.createElement(O.a,{type:"swap"}),"\u5207\u6362\u6392\u5e8f")),footer:l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(ne.a,{onChange:this.onArticleCommentChange,style:{width:"100%"},addonAfter:l.a.createElement(O.a,{type:"smile"})}),l.a.createElement(P.a,{onClick:this.onArticleCommentClick},"\u8bc4\u8bba")),renderItem:function(t,a){return l.a.createElement(q.a.Item,{key:t.id},l.a.createElement("div",{style:{width:"100%"}},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(z,{id:t.create_user,avatar:t.create_user_avatar})),l.a.createElement("div",{style:{paddingLeft:"1rem"}},t.create_user_name)),l.a.createElement("div",{style:{paddingTop:"1rem",textIndent:"2rem"}},t.content),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement("span",{onClick:e.onClickCommentIcon.bind(e,a),style:{paddingRight:"1rem"}},l.a.createElement(O.a,{type:"message",style:{marginRight:8}}),l.a.createElement("span",null,e.state.commentListStatus.indexOf(a)>=0?"\u6536\u8d77\u8bc4\u8bba":"\u67e5\u770b\u8bc4\u8bba"))),l.a.createElement("div",null,U.a.unix(t.create_time).fromNow())),e.state.commentListStatus.indexOf(a)>=0?l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(fe,{comment_id:t.id,comment_user:t.create_user,index:a})):null))}}))}}]),t}(n.Component),ye=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).onClickLike=function(){M.POST("/api/community/option/".concat(a.state.id),{kind:"article",type:"like",option:a.state.detailData.like_status>=0?-1:1}).then(function(e){if(0===e.code){var t=a.state.detailData;t.like_users_num=e.data.num,t.like_status=e.data.status,a.setState({detailData:t})}})},a.state={id:e.match.params.id,sameArticleData:[],tagData:[],detailData:{}},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.GET("/api/article/type",{start:1,limit:5,type:"same",id:this.state.id}).then(function(t){e.setState({sameArticleData:t.data.data})}),M.GET("/api/article/tags").then(function(t){e.setState({tagData:t.data})}),M.GET("/api/article/detail/".concat(this.state.id)).then(function(t){0===t.code&&e.setState({detailData:t.data})})}},{key:"render",value:function(){var e=this.state.detailData;return l.a.createElement(c.a,null,l.a.createElement(u.a,{span:17},l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(d.a,null,l.a.createElement(T.a,null,l.a.createElement(T.a.Title,{level:2},l.a.createElement("p",{style:{color:"black"}},e.title)),l.a.createElement(T.a.Text,null,l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(z,{key:e.title,id:e.create_user,avatar:e.create_user_avatar}),l.a.createElement("p",{style:{paddingLeft:"1rem"}},"\u53d1\u5e03\u65f6\u95f4: ",U.a.unix(e.create_time).fromNow()),l.a.createElement("p",{style:{paddingLeft:"1rem"}},"\u6d4f\u89c8\u91cf: ",e.read_num))),l.a.createElement("div",{style:{display:"flex"}},e.tags?e.tags.map(function(e,t){return l.a.createElement(V.a,{key:t},l.a.createElement(k.a,{to:{pathname:"/article/all",query:{name:"\u5168\u90e8\u6587\u7ae0"}}},e))}):null),l.a.createElement(d.a,{bordered:!1},l.a.createElement(d.a.Meta,{description:l.a.createElement("div",null,l.a.createElement("p",{style:{color:"black"}},"\u6458\u8981: "),e.description)})),l.a.createElement(d.a,null,l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}}),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",paddingTop:"1rem"}},l.a.createElement("div",null,l.a.createElement("p",{style:{paddingLeft:"1rem"}},"\u66f4\u65b0\u65f6\u95f4: ",U.a.unix(e.update_time).fromNow())),l.a.createElement("div",null,l.a.createElement("p",{style:{paddingLeft:"1rem"}},"\u4f5c\u8005: ",e.create_user_name))))),l.a.createElement(d.a,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement("div",null,l.a.createElement("img",{alt:"wechat",src:J.a}),l.a.createElement("div",null,"\u626b\u63cf\u5173\u6ce8\u5fae\u4fe1\u516c\u4f17\u53f7\uff0c\u7b2c\u4e00\u65f6\u95f4\u83b7\u53d6\u535a\u5ba2\u66f4\u65b0\u52a8\u6001")))),l.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"1rem"}},l.a.createElement(P.a,{style:{color:e.like_status>=0?"red":"green"},onClick:this.onClickLike},"\u70b9\u8d5e\u4e00\u4e0b\u5427~(",e.like_users_num,")")))),l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(d.a,null,l.a.createElement("p",null,"\u8bc4\u8bba"),l.a.createElement(Ee,{object_id:this.state.id})))),l.a.createElement(u.a,{span:7},l.a.createElement("div",{style:{paddingLeft:"1rem",paddingTop:"1rem"}},l.a.createElement(F,{title:"\u731c\u4f60\u559c\u6b22",data:this.state.sameArticleData,linkPath:"/article/all"})),l.a.createElement("div",{style:{paddingLeft:"1rem",paddingTop:"1rem"}},l.a.createElement(K,{title:"\u6807\u7b7e",data:this.state.tagData}))))}}]),t}(n.Component),ve=a(59),be=a(142),ke=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.getLeaveMessageList(a.state.start,a.state.limit)},a.handleChange=function(e){a.setState({content:e.target.value})},a.onClickSelectAvatar=function(e){a.setState({messagerAvatar:Se[e].src})},a.getLeaveMessageList=function(e,t){M.GET("/api/leaveMessage/list",{start:e,limit:t}).then(function(e){a.setState({data:e.data.data,total:e.data.total})})},a.onClickLeaveMessageButton=function(){a.state.content&&(a.setState({submitting:!0}),M.POST("/api/leaveMessage/create/leaveMessage",{content:a.state.content,create_user_avatar:a.state.messagerAvatar,create_user_name:a.state.messagerName}).then(function(e){0===e.code&&(a.setState({submitting:!1,content:""}),a.getLeaveMessageList(a.state.start,a.state.limit),a.setState({visible:!1}))}))},a.commentLeaveMessage=function(e){a.state.content&&(a.setState({submitting:!0}),M.POST("/api/leaveMessage/comment",{content:a.state.content,create_user_avatar:a.state.messagerAvatar,create_user_name:a.state.messagerName,message_id:e}).then(function(e){0===e.code&&(a.setState({submitting:!1,content:""}),a.getLeaveMessageList(a.state.start,a.state.limit),a.setState({visible:!1}))}))},a.onClickReply=function(e){a.setState({visible:!a.state.visible}),a.commentLeaveMessage(e)},a.state={start:1,limit:10,total:0,data:[],messagerAvatar:"http://jxhx2.yangqq.com/e/tool/images/tx1.jpg",messagerName:"\u6e38\u5ba2",submitting:!1,content:""},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(_e,{messagerAvatar:this.state.messagerAvatar,onClickSelectAvatar:this.onClickSelectAvatar,handleChange:this.handleChange,onClickLeaveMessageButton:this.onClickLeaveMessageButton,submitting:this.state.submitting,content:this.state.content}),l.a.createElement(d.a,null,this.state.data.map(function(t,a){return l.a.createElement(Ce,{item:t,key:a,onClickReply:e.onClickReply},t.comments.map(function(t,a){return l.a.createElement(Ce,{item:t,key:a,onClickReply:e.onClickReply})}))})),l.a.createElement(ae.a,{title:"Modal",visible:this.state.visible,onCancel:this.onClickReply,footer:null,closable:!0},l.a.createElement(_e,{messagerAvatar:this.state.messagerAvatar,onClickSelectAvatar:this.onClickSelectAvatar,handleChange:this.handleChange,onClickLeaveMessageButton:this.commentLeaveMessage,submitting:this.state.submitting,content:this.state.content})))}}]),t}(n.Component),Ce=function(e){var t=e.children,a=e.item;e.onClickReply,e.id;return l.a.createElement(be.a,{author:l.a.createElement("p",null,a.create_user_name),avatar:l.a.createElement(j.a,{src:a.create_user_avatar,alt:a.create_user_name}),datetime:U.a.unix(a.create_time).calendar(),content:l.a.createElement("p",null,a.content)},t)};function _e(e){var t=this,a=e.messagerAvatar,n=e.onClickSelectAvatar,i=e.handleChange,r=e.onClickLeaveMessageButton,c=e.submitting,s=e.content;return l.a.createElement(d.a,null,l.a.createElement(be.a,{avatar:l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"1rem"}},l.a.createElement(j.a,{src:a,alt:"visitor"})),l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(S.a,{placement:"bottom",content:l.a.createElement(d.a,null,Se.map(function(e,a){return l.a.createElement(d.a.Grid,{onClick:n.bind(t,a),key:a,style:{width:"25%",textAlign:"center"}},l.a.createElement("img",{alt:e.alt,src:e.src}))})),trigger:"click"},l.a.createElement(P.a,null,"\u9009\u62e9\u5934\u50cf")))),content:l.a.createElement(je,{onChange:i,onSubmit:r,submitting:c,value:s})}))}var we=ne.a.TextArea,je=function(e){var t=e.onChange,a=e.onSubmit,n=e.submitting,i=e.value;return l.a.createElement("div",null,l.a.createElement(ve.a.Item,null,l.a.createElement(we,{rows:4,onChange:t,value:i})),l.a.createElement(ve.a.Item,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(P.a,{htmlType:"submit",loading:n,onClick:a,type:"primary"},"\u7559\u8a00"))))},Se=[{alt:"default1",src:"http://jxhx2.yangqq.com/e/tool/images/tx1.jpg"},{alt:"default2",src:"http://jxhx2.yangqq.com/e/tool/images/tx2.jpg"},{alt:"default3",src:"http://jxhx2.yangqq.com/e/tool/images/tx3.jpg"},{alt:"default4",src:"http://jxhx2.yangqq.com/e/tool/images/tx4.jpg"},{alt:"default5",src:"http://jxhx2.yangqq.com/e/tool/images/tx5.jpg"},{alt:"default6",src:"http://jxhx2.yangqq.com/e/tool/images/tx6.jpg"},{alt:"default7",src:"http://jxhx2.yangqq.com/e/tool/images/tx7.jpg"},{alt:"default8",src:"http://jxhx2.yangqq.com/e/tool/images/tx8.jpg"}],Oe=a(175),Te=a.n(Oe),xe=a(176),Ie=a(178),Ae=ve.a.create({name:"modal"})(function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,i=e.form.getFieldDecorator;return l.a.createElement(ae.a,{visible:t,title:l.a.createElement("p",{style:{color:"black"}},"\u52a0\u5165\u6211\u4eec"),okText:"\u767b\u5f55",onCancel:a,onOk:n},l.a.createElement(ve.a,{layout:"vertical",style:{color:"black"}},l.a.createElement(ve.a.Item,{label:l.a.createElement("p",{style:{color:"black"}},"\u8d26\u53f7")},i("account",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7"}]})(l.a.createElement(ne.a,null))),l.a.createElement(ve.a.Item,{label:l.a.createElement("p",{style:{color:"black"}},"\u5bc6\u7801")},i("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(l.a.createElement(ne.a,{type:"password"})))))}}]),t}(n.Component)),Le=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleCreate=function(){var e=a.formRef.props.form;e.validateFields(function(t,n){t||(a.login(n.account,n.password),e.resetFields(),a.setState({visible:!1}))})},a.saveFormRef=function(e){a.formRef=e},a.login=function(e,t){M.POST("/api/user/login",{account:e,password:t}).then(function(e){0===e.code&&e.token&&(localStorage.setItem("user_token",e.token),localStorage.setItem("id",e.data.id),a.setState({userInfo:e.data},function(){window.location.reload()}),a.props.getUserLoginStatus({userInfo:e.data}))})},a.state={visible:!1,isLogin:e.loginStatus,userInfo:{}},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(P.a,{type:"primary",onClick:this.showModal},"\u767b\u5f55"),l.a.createElement(Ae,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate}))}}]),t}(n.Component);U.a.locale("zh-cn");var Me=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).handleAvatarClick=function(){alert("user center")},a.handleMessageClick=function(){},a.getUserLoginStatus=function(e){a.setState({isLogin:!0,userInfo:e.userInfo})},a.handleUserMenuClick=function(e){switch(e.key){case"userCenter":break;case"logout":a.setState({isLogin:!1,userInfo:null}),localStorage.removeItem("user_token")}},a.handleUserLogout=function(){a.setState({isLogin:!1,userInfo:null}),localStorage.removeItem("user_token")},a.getUserMessageList=function(){M.GET("/api/message/list").then(function(e){0===e.code&&a.setState({userMessage:e.data.data,userMessageTotal:e.data.total})})},a.getUserInfo=function(){M.GET("/api/user/info").then(function(e){0===e.code&&a.setState({userInfo:e.data,isLogin:!0})})},a.handleMessageRead=function(e){M.PUT("/api/message/read/".concat(e)).then(function(e){0===e.code&&a.getUserMessageList()})},a.onUserMessageMouseEnter=function(){a.getUserMessageList()},a.onReadAllButtonClick=function(){M.PUT("/api/message/readall").then(function(e){0===e.code&&a.getUserMessageList()})},a.setLoginStatus=function(e){a.setState({isLogin:e})},a.state={isLogin:!1,userInfo:null,userMessage:[],userMessageTotal:0},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getUserInfo(),this.getUserMessageList()}},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{style:{background:"white"}},l.a.createElement(q.a,{bordered:!0,size:"small",itemLayout:"horizontal",dataSource:this.state.userMessage,header:l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement("div",{style:{textAlign:"center"}}),l.a.createElement(P.a,{onClick:this.onReadAllButtonClick},"\u5168\u90e8\u5df2\u8bfb")),renderItem:function(t){return l.a.createElement(q.a.Item,{key:t.id,actions:[l.a.createElement(P.a,{onClick:e.handleMessageRead.bind(e,t.id)},"\u77e5\u9053\u4e86")]},l.a.createElement("div",null,l.a.createElement(q.a.Item.Meta,{className:"userCenter",avatar:l.a.createElement(z,{id:t.from_user_id,avatar:t.from_user_avatar,placement:"left"}),title:t.title,description:l.a.createElement("p",{onClick:e.handleMessageRead.bind(e,t.id),dangerouslySetInnerHTML:{__html:t.content}})}),l.a.createElement("div",{style:{display:"flex",justifyContent:"end"}},l.a.createElement("p",null,U.a.unix(t.time).format("YY-MM-DD HH:mm:ss")))))}}));return l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement("div",null,l.a.createElement(O.a,{type:"search",theme:"outlined",style:{fontSize:18,paddingRight:"20px"}})),l.a.createElement("div",null,l.a.createElement(xe.a,{overlay:t,trigger:["click","hover"]},l.a.createElement(Ie.a,{count:this.state.userMessageTotal},l.a.createElement(O.a,{type:"bell",theme:"outlined",onMouseEnter:this.onUserMessageMouseEnter,style:{fontSize:18}})))),l.a.createElement("div",{style:{paddingLeft:"1rem"}},this.state.isLogin?l.a.createElement(z,{id:this.state.userInfo.id,avatar:this.state.userInfo.avatar,type:"self",getUserLoginStatus:this.getUserLoginStatus}):l.a.createElement(Le,{isLogin:this.state.isLogin,getUserLoginStatus:this.getUserLoginStatus})))}}]),t}(n.Component),De=a(75),qe=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return l.a.createElement(De.a,{image:"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original",imageStyle:{width:"100%",height:"auto"},description:l.a.createElement("span",null,"\u9875\u9762\u8dd1\u53bb\u706b\u661f\u5566~\uff01",l.a.createElement(k.a,{to:{pathname:"/",query:{name:"\u4e3b\u9875"}}},"\u70b9\u6211\u8fd4\u56de\u4e3b\u9875"))})}}]),t}(n.Component),Re=v.a.Header,Pe=v.a.Content,Ye=v.a.Footer,ze=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).setLoginStatus=function(e){a.setState({isLogin:e})},a.state={isLogin:!1},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=Object(b.a)(function(e){var t=e.location,a=t.pathname.split("/").filter(function(e){return e}),n=[];n.push(l.a.createElement(p.a.Item,{key:1},"\u4e3b\u9875"));var i=a.map(function(e,n){var i="/".concat(a.slice(0,n+1).join("/")),r="";return"article"===e&&"/article"===i?r="\u6587\u7ae0":"hot"===e&&"/article/hot"===i?r="\u70ed\u95e8\u6587\u7ae0":"new"===e&&"/article/new"===i?r="\u6700\u65b0\u6587\u7ae0":"recommend"===e&&"/article/recommend"===i?r="\u63a8\u8350\u6587\u7ae0":"all"===e&&"/article/all"===i?r="\u5168\u90e8\u6587\u7ae0":"detail"===e&&"/article/detail"===i?r=t.query?t.query.name:"\u6587\u7ae0\u8be6\u60c5":"message"===e&&"/message"===i?r="\u7559\u8a00":"center"===e&&"/center"===i?r="\u7528\u6237\u4e2d\u5fc3":"article"===e&&"/center/article"===i?r="\u6587\u7ae0":"follow"===e&&"/center/follow"===i&&(r="\u5173\u6ce8"),l.a.createElement(p.a.Item,{key:i},r)});return n=n.concat(i),l.a.createElement(d.a,null,l.a.createElement(p.a,null,n))});return l.a.createElement(v.a,null,l.a.createElement(c.a,null,l.a.createElement(u.a,{span:5}),l.a.createElement(u.a,{span:14},l.a.createElement(o.a,null,l.a.createElement(Re,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",{style:{width:"20%"}},l.a.createElement(k.a,{to:{pathname:"/",query:{name:"\u4e3b\u9875"}}},l.a.createElement("img",{alt:"logo",width:"100%",src:Te.a}))),l.a.createElement("div",null,l.a.createElement(m.a,{mode:"horizontal",defaultSelectedKeys:["home"],style:{lineHeight:"64px"}},l.a.createElement(m.a.Item,{key:"home"},l.a.createElement(k.a,{to:{pathname:"/",query:{name:"\u4e3b\u9875"}}},"\u9996\u9875")),l.a.createElement(m.a.Item,{key:"article"},l.a.createElement(k.a,{to:{pathname:"/article",query:{name:"\u6587\u7ae0"}}},"\u6587\u7ae0")),l.a.createElement(m.a.Item,{key:"message"},l.a.createElement(k.a,{to:{pathname:"/message",query:{name:"\u7559\u8a00"}}},"\u7559\u8a00")))),l.a.createElement("div",null,l.a.createElement(Me,null))))),l.a.createElement(Pe,null,l.a.createElement("div",{style:{paddingTop:"1rem"}},l.a.createElement(e,null)),l.a.createElement(C.a,null,l.a.createElement(_.a,{exact:!0,path:"/",component:Z}),l.a.createElement(_.a,{exact:!0,path:"/article",component:function(e){return l.a.createElement(te,Object.assign({},e,{articleType:"hot"}))}}),l.a.createElement(_.a,{exact:!0,path:"/message",component:ke}),l.a.createElement(_.a,{exact:!0,path:"/article/hot",component:function(e){return l.a.createElement(te,Object.assign({},e,{articleType:"hot"}))}}),l.a.createElement(_.a,{exact:!0,path:"/article/new",component:function(e){return l.a.createElement(te,Object.assign({},e,{articleType:"new"}))}}),l.a.createElement(_.a,{exact:!0,path:"/article/recommend",component:function(e){return l.a.createElement(te,Object.assign({},e,{articleType:"recommend"}))}}),l.a.createElement(_.a,{exact:!0,path:"/article/all",component:function(e){return l.a.createElement(te,Object.assign({},e,{articleType:"all"}))}}),l.a.createElement(_.a,{exact:!0,path:"/article/detail/:id",component:ye}),l.a.createElement(_.a,{exact:!0,path:"/usercenter/:id",component:me}),l.a.createElement(_.a,{exact:!0,path:"/center/user/:id",component:ge}),l.a.createElement(_.a,{exact:!0,path:"/center/article/:id",component:ge}),l.a.createElement(_.a,{exact:!0,path:"/center/follow/:id",component:pe}),l.a.createElement(w.a,{exact:!0,strict:!0,from:"/usercenter/:id",to:"/center/article/:id"}),l.a.createElement(_.a,{component:qe})),l.a.createElement(s.a,null)),l.a.createElement(Ye,null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("p",null,"Copyright \xa9 2019 RunnerMonster. All rights Reserved.")))),l.a.createElement(u.a,{span:5})))}}]),t}(n.Component),Ge=a(348);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(Ge.a,null,l.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[182,1,2]]]);
//# sourceMappingURL=main.36196281.chunk.js.map